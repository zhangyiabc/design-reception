<template>
  <div class="card" @click="handMessageClick">
    <a-badge style="width: 100%" :dot="Message.status == 'unread'">
      <div class="content">
        <div class="left">
          <svg
            t="1644209567785"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="1032"
            width="45"
            height="45"
          >
            <path
              d="M938.1888 485.0688C954.7776 625.9712 849.92 759.1936 724.7872 820.736c-188.2112 92.16-428.7488 0-510.0544-191.3856a396.8 396.8 0 0 1-26.8288-85.7088 380.1088 380.1088 0 0 1-6.8608-71.68c0-174.08 125.44-327.68 303.2064-368.64 198.656-30.72 386.8672 112.64 441.9584 281.9072a369.2544 369.2544 0 0 1 11.9808 99.84z"
              fill="#136CA8"
              p-id="1033"
            ></path>
            <path
              d="M495.9232 611.2256c10.24 80.384-108.7488 92.16-144.5888 21.8112C327.68 563.2 434.8928 516.096 480.0512 572.3136a46.4896 46.4896 0 0 1 15.872 38.912zM300.7488 358.4a43.3152 43.3152 0 0 0-4.4032-18.2272c-7.9872-31.6416-44.4416-39.7312-75.5712-33.5872a367.616 367.616 0 0 0-33.8944 100.1472 58.1632 58.1632 0 0 0 46.3872 23.9616 60.416 60.416 0 0 0 57.344-35.2256c5.4272-5.3248 5.4272-25.8048 10.1376-37.0688z"
              fill="#054F7C"
              p-id="1034"
            ></path>
            <path
              d="M992.0512 227.84c-28.2624-37.2736-126.464-29.3888-165.0688-2.1504a441.7536 441.7536 0 0 1 37.9904 43.8272c12.9024-3.6864 26.624-7.9872 39.5264-10.9568 6.9632-1.536 16.2816-2.56 25.6-3.8912 26.7264-3.7888 25.4976 26.7264 17.5104 37.1712-80.384 105.2672-175.4112 180.6336-280.576 250.88q-27.2384 19.2512-55.1936 37.2736C474.5216 653.312 236.6464 790.3232 201.3184 768.6144c-18.5344-11.3664 13.312-48.5376 43.2128-84.0704A351.1296 351.1296 0 0 1 217.2928 634.88c-45.7728 39.6288-91.0336 115.2-77.4144 161.8944a56.1152 56.1152 0 0 0 58.368 39.5264 247.1936 247.1936 0 0 0 73.9328-15.1552c108.1344-34.6112 200.3968-94.8224 284.8768-137.4208 18.432-9.3184 35.328-21.2992 52.6336-32.1536s34.304-22.016 51.2-33.28 44.3392-32.8704 60.6208-44.4416c94.72-76.5952 349.0816-242.2784 270.5408-346.0096z"
              fill="#F15921"
              p-id="1035"
            ></path>
            <path
              d="M980.992 210.8416c-29.184-38.5024-133.12-28.8768-168.8576 0.512a446.2592 446.2592 0 0 1 39.7312 41.7792c13.5168-3.8912 27.9552-8.4992 41.5744-11.5712 6.9632-1.536 16.2816-2.56 25.6-3.8912 26.7264-3.7888 25.4976 26.7264 17.5104 37.1712-80.4864 105.1648-175.5136 180.5312-280.6784 250.7776q-27.2384 19.2512-55.1936 37.5808C463.36 636.2112 225.28 773.3248 190.1568 751.5136c-18.5344-11.4688 13.5168-48.8448 43.52-84.48A348.16 348.16 0 0 1 215.04 629.248c-2.048-4.608-3.8912-9.3184-5.7344-14.0288-46.6944 38.912-94.1056 116.736-80.1792 164.352A56.1152 56.1152 0 0 0 187.1872 819.2a247.1936 247.1936 0 0 0 73.9328-15.1552c108.1344-34.6112 200.3968-94.8224 284.8768-137.4208 18.432-9.3184 35.328-21.2992 52.6336-32.1536s34.304-22.016 51.2-33.28 44.3392-32.8704 60.6208-44.4416c94.6176-76.5952 349.0816-242.2784 270.5408-345.9072z"
              fill="#FAB414"
              p-id="1036"
            ></path>
            <path
              d="M893.8496 615.1168c-10.24 34.7136-31.4368 44.9536-52.3264 44.9536-41.7792-10.24-52.3264-51.2-31.3344-81.92 20.48-20.48 52.3264-10.24 69.3248 3.7888a47.0016 47.0016 0 0 1 14.336 33.1776zM737.28 245.76c-8.2944 38.5024-71.0656 38.5024-71.0656-2.4576 0-20.48 20.48-30.72 37.1712-30.72A33.4848 33.4848 0 0 1 737.28 245.76zM555.2128 471.04c-2.6624 19.1488-13.2096 29.3888-34.0992 19.1488-17.92-8.8064-12.8-25.088-4.4032-36.0448a13.312 13.312 0 0 1 10.24-5.0176 89.088 89.088 0 0 1 17.408 1.536 11.1616 11.1616 0 0 1 7.68 5.9392 27.0336 27.0336 0 0 1 3.1744 14.4384z"
              fill="#054F7C"
              p-id="1037"
            ></path>
          </svg>
        </div>
        <div class="right">
          <div class="info">
            <div v-html="Message.content"></div>
          </div>
          <div class="tools">
            <div class="time">
              {{ Message.createdAt | formatTime }}
            </div>
          </div>
        </div>
      </div>
    </a-badge>
    <a-modal
      v-model="visible"
      title="系统消息"
      ok-text="确认"
      cancel-text="取消"
      @ok="hideModal"
    >
      <p>
        {{ Message.content }}
      </p>
    </a-modal>
  </div>
</template>

<script>
import { getAdminNoticeDetail } from "@/apis/notice";
import moment from "moment";
export default {
  filters: {
    formatTime(time) {
      return moment.utc(time).format("yyyy年MM月DD日 h:mm");
    },
  },
  data() {
    return {
      visible: false,
    };
  },
  props: {
    Message: {
      type: Object,
      default: () => {},
    },
  },
  methods: {
    handMessageClick() {
      this.visible = true;
      if (this.Message.status == "unread") {
        getAdminNoticeDetail(this.Message.id);
        this.Message.status = "read";
        this.$store.dispatch("notice/reduceAdminTotal");
      }
    },
    hideModal() {
      this.visible = false;
    },
  },
};
</script>

<style lang="scss" scoped>
.card {
  padding: 5px 0;
  transition: 0.3s;
  &:hover {
    background-color: #f1f1f1;
  }
  .content {
    padding: 10px 0;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    border-bottom: 1px solid #f1f1f1;
    .left {
      margin-right: 12px;
    }
    .right {
      .info {
        font-size: 15px;
        color: #333;
      }
      .tools {
        margin-top: 10px;
        font-size: 14px;
        color: #999;
      }
    }
  }
}
</style>
